
---

# ⚡ FlashMemo (灵感快记)

> **将“灵感捕获”到“知识归档”的路径缩短到毫秒级。**
> 您的私人第二大脑入口，让碎片化知识不再流浪。

FlashMemo 是一款专为知识工作者、开发者和研究人员打造的极简桌面工具。它摒弃了传统笔记软件笨重的启动过程，通过全局热键和 AI 赋能，帮助您以最快速度完成知识的**采集、清洗、归档与检索**。无论您使用 Windows、macOS 还是 Linux，它都能无缝融入您的工作流。

---

## 🌟 为什么你需要 FlashMemo？(核心场景)

在信息爆炸的时代，我们的知识来源极其分散，这导致了严重的**“知识碎片化”**与**“收藏夹吃灰”**现象。

**🤔 您是否经历过这样的场景？**

作为一名研究人员或开发者，您每天穿梭于各种信息源之间：
*   在 **arXiv** 上读论文时，发现了一段精彩的架构描述；
*   在 **知乎** 或 **小红书** 上浏览时，看到了一个很有启发的观点（Insight）；
*   在 **技术博客** 上，发现了一段可复用的代码片段；
*   甚至在与 **ChatGPT** 对话时，AI 生成了一段绝妙的总结。

**❌ 过去的问题：**
您可能把论文片段存在了 Zotero，把知乎内容点了收藏（然后忘了看），把代码存进了 GitHub Gist，把 AI 对话留在了网页历史里。
**结果是：** 您的知识散落在五个不同的地方。当某天您真正需要用到这些素材时，却想不起来它们到底在哪里，甚至忘记了它们的存在。

**✅ FlashMemo 的解决方案：**
不需要打开笨重的 Notion 或 Obsidian，不需要切换窗口。
只需按下 **`Ctrl+Shift+Space`**，一个极简的悬浮窗即刻出现。它自动读取您刚才复制的内容，AI 帮您润色格式，您只需打上标签（如 `#Transformer`），按下回车。这条知识随即被清洗干净并统一归档。

**更重要的是，当您下次需要它时：**
您无需在海量文件中翻找。只需唤起 **FlashChat**，像聊天一样提问：“我之前记过哪些关于 Transformer 的架构细节？”
您的私人 AI 助手会立即检索您的知识库，不仅为您总结出核心观点，还会**精准引用**出处（是哪一天的笔记、哪个文件）。**记录只是过程，随时能被 AI 唤醒的知识，才是真正的第二大脑。**

---

## ✨ 核心功能 (Features)

### 1. 🚀 毫秒级灵感捕获 (Instant Capture)
*   **全局热键唤醒**：无论当前聚焦在哪个软件，快捷键一键唤出悬浮窗。
*   **智能剪贴板接管**：无需粘贴，自动填充剪贴板内容。
*   **沉浸式体验**：录入完成后窗口瞬间消失，让您立刻回到刚才的阅读或工作中，心流不被打断。

### 2. 🧠 AI 深度赋能 (AI-Native)
*   **一键润色**：复制的内容格式乱了？PDF 换行符有问题？点击“✨ 润色”，让 AI 瞬间帮您整理成优雅的 Markdown 格式。
*   **知识库问答 (FlashChat)**：
    *   不仅能记，更能查。通过独立的对话窗口（`Ctrl+Alt+Space`），与您的私人知识库对话。
    *   **语义检索**：无需死记硬背文件名，直接用自然语言提问，AI 会智能路由到相关标签并检索内容。

### 3. 📂 统一归档，拒绝碎片 (Unified Storage)
我们支持将所有来源的碎片信息统一存储，目前内置两种模式：
*   **本地 Markdown 模式**：
    *   数据完全掌控在您手中。
    *   自动生成 `Tag/Title.md` 的标准文件结构，可直接被 **Obsidian、VS Code、Typora** 等工具读取和管理。
*   **飞书云文档模式 (Feishu Docs)**：
    *   **文档化思维**：每一条笔记在云端都是一篇独立的在线文档，排版精美。
    *   **多端同步**：在电脑上记录，在手机飞书 App 上随时查看。

> **💡 高扩展性设计**：得益于 FlashMemo 的**整洁架构**与接口解耦设计，存储层是高度插件化的。除了上述两种方式，开发者可以轻松扩展支持 **Notion、MySQL、MongoDB** 或任何您喜欢的存储后端。

### 4. 📝 强大的续写与管理
*   **续写模式 (Append Mode)**：
    *   不仅仅是新建，FlashMemo 允许您快速检索已有的笔记，并在其基础上进行追加或修改。
    *   避免了“同一个主题生成了 100 个小文件”的尴尬，帮助您构建连续的知识体系。
*   **双重数据保险**：
    *   采用 **Write-Ahead Log (WAL)** 机制，所有操作优先写入本地备份。即使断网或 API 报错，您的灵感也绝不会丢失。

---

## 📖 使用指引 (User Guide)

### 1. 环境准备与安装
确保您的电脑已安装 **Python 3.9+**。

1.  **克隆或下载项目代码**。
2.  **安装依赖库**：
    打开终端（Terminal/CMD），进入项目目录，运行：
    ```bash
    pip install -r requirements.txt
    ```
3.  **首次运行初始化**：
    运行一次主程序，它会自动为您生成默认的配置文件和 Prompt 目录：
    ```bash
    python main.py
    ```
    *运行后，您会在根目录看到新生成的 `config.json` 文件。*

### 2. 配置文件详解 (`config.json`)
请用文本编辑器打开根目录下的 `config.json`。这是 FlashMemo 的控制中心，支持热修改（重启程序生效）。

```json
{
    "storage_type": "local",
    "hotkey": "ctrl+shift+space",
    "chat_hotkey": "ctrl+alt+space",
    "prompts_path": "./prompts",
    "storage_path": "./my_notes_data",
    
    "openai_api_key": "sk-xxxxxx",
    "openai_api_base": "https://api.deepseek.com",
    "openai_model": "deepseek-chat",
    
    "feishu_app_id": "",
    "feishu_app_secret": "",
    "feishu_root_token": ""
}
```

| 字段名 | 说明 | 推荐值/示例 |
| :--- | :--- | :--- |
| **`storage_type`** | 存储模式。填 `"local"` 为本地 Markdown，填 `"feishu"` 为飞书云文档。 | `"local"` |
| **`hotkey`** | 唤起**记录窗口**的全局快捷键。 | `"ctrl+shift+space"` |
| **`chat_hotkey`** | 唤起**对话窗口**的全局快捷键。 | `"ctrl+alt+space"` |
| **`prompts_path`** | 存放 AI 指令模板（.txt）的文件夹路径。 | `"./prompts"` |
| **`storage_path`** | **[本地模式专用]** 笔记文件的存放根目录。 | `"./my_notes_data"` |
| **`openai_api_key`** | LLM 的 API Key。 | `sk-...` |
| **`openai_api_base`** | **[重要]** API 代理地址。如果是 OpenAI 官方可留空；如果是 DeepSeek/OneAPI 等，请填 Base URL。 | `"https://api.deepseek.com"` |
| **`openai_model`** | 模型名称。 | `"gpt-4"`, `"deepseek-chat"` |
| **`feishu_...`** | **[飞书模式专用]** 飞书开放平台的配置信息，详见下文。 | 见步骤 3 |

### 3. (进阶) 如何配置飞书云存储？
如果您希望将笔记存入飞书云文档，实现多端同步，请按照以下步骤操作（耗时约 5 分钟）：

1.  **创建应用**：登录 [飞书开放平台](https://open.feishu.cn/app)，创建“企业自建应用”，获取 **App ID** 和 **App Secret**。
2.  **开通权限**：在“权限管理”中开启 `drive:drive` 和 云文档相关的权限。
3.  **添加机器人**：点击“添加应用能力” -> “机器人” ，为应用创建机器人。
4.  **发布应用**：点击“版本管理与发布” -> “创建版本” -> “发布”。(权限修改必须发版才能生效)。
5.  **获取 Root Token**：在飞书云文档中新建一个文件夹，查看浏览器 URL 末尾的字符串，即为 `feishu_root_token`。
6.  **⚠️ 关键步骤：给机器人授权文档权限**：在飞书 App 中新建一个群聊，将创建的机器人拉入群聊后，将云文档分享到群内，赋予机器人操作云文档的权限。

---

### 4. 核心工作流：灵感捕获
1.  **复制**：在任意界面选中内容，`Ctrl+C`。
2.  **唤起**：按下 **`Ctrl+Shift+Space`**。
3.  **标题 (可选)**：程序会自动根据时间生成标题，您也可以手动输入更直观的标题。
4.  **AI 润色 (可选)**：点击顶部的 **“✨ 润色”**，让 AI 帮您整理格式或翻译。
5.  **打标与保存**：按 `Tab` 切换到标签栏，输入或选择标签（如 `Python`），按下 **`Ctrl+Enter`**。
    *   *此时窗口会瞬间消失，后台会自动处理保存与上传。*

### 5. 进阶工作流：续写模式 (Append Mode)
当您想对已有的笔记进行补充时（例如持续记录会议纪要）：
1.  唤起窗口后，点击底部的 **“📝 续写模式”** 开关。
2.  **选择标签**：先选一个 Tag，系统会加载该 Tag 下的所有笔记。
3.  **选择文件**：在弹出的文件下拉框中选择目标笔记。
4.  **自动加载**：原始内容会自动填充到编辑器中。
5.  **修改与更新**：编辑完成后，点击 **“更新笔记”**，旧文件会被覆盖更新。

### 6. 知识库对话 (FlashChat)
FlashMemo 不仅仅是记录工具，更是您的知识检索助手。
1.  按下 **`Ctrl+Alt+Space`** 唤起对话窗口。
2.  点击顶部的 **“🔌 启用知识库检索”** 开关（变绿）。
3.  **提问**：例如 *“我上周关于 RAG 架构的笔记里，核心观点是什么？”*
4.  **回答**：AI 会自动检索相关 Tag 下的笔记，为您总结答案，并列出**引用来源**（文件名）。

---

## 🏗️ 开发者与架构 (Developers)

FlashMemo 采用了 **整洁架构 (Clean Architecture)** 原则，实现了核心逻辑与 UI、存储、AI 模块的彻底解耦。

如果您想深入了解：
*   **代码的分层设计**
*   **如何编写自定义的 Storage 插件**
*   **如何修改 AI 的 Prompt 策略**

👉 **请查阅专门的技术文档：[ARCHITECTURE.md](./ARCHITECTURE.md)**